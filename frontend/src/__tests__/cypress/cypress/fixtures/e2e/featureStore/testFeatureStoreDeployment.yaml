kind: Secret
apiVersion: v1
metadata:
  name: s3-credentials-secret
  namespace: {{namespace}}
stringData:
  AWS_ACCESS_KEY_ID: {{awsAccessKey}}
  AWS_SECRET_ACCESS_KEY: {{awsSecretKey}}
  AWS_DEFAULT_REGION: {{awsDefaultRegion}}
type: Opaque
---
apiVersion: feast.dev/v1alpha1
kind: FeatureStore
metadata:
  name: test-s3
  namespace: {{namespace}}
  labels:
    feature-store-ui: enabled
spec:
  feastProject: s3_features
  feastProjectDir:
    git:
      ref: master
      url: 'https://github.com/ntkathole/feast-credit-score-local-tutorial.git'
  services:
    onlineStore:
      server:
        envFrom:
          - secretRef:
              name: s3-credentials-secret
    registry:
      local:
        persistence:
          file:
            path: 's3://{{awsBucketName}}/feast-test/feast-credit-score-remote-data/registry.pb'
        server:
          envFrom:
            - secretRef:
                name: s3-credentials-secret
          grpc: true
          image: 'quay.io/feastdev-ci/feature-server:1c59bbae120078b945d5a8574b96d66b1173513c'
          restAPI: true

